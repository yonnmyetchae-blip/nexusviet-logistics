<!DOCTYPE html>
<html>
<head>
  <title>Shipment Tracking</title>
</head>
<body>

<h2>Shipment Tracking</h2>
<div id="result"></div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwoyNzupluztEPyAKdm7jhu8RA-VZkBZ-dBb9Iyu6gDK0oEn_6DMrJgg5SQ6_GA_0wk/exec";
const tracking = new URLSearchParams(window.location.search).get("tracking");

fetch(API_URL + "?tracking=" + tracking)
  .then(r => r.text())
  .then(t => {
    if (t === "Not found") {
      result.innerText = "Tracking not found.";
      return;
    }

    const d = JSON.parse(t);
    let html = "";

    for (const key in d) {
      if (d[key] !== "" && d[key] !== null) {
        html += `<p><b>${key.replace(/_/g, " ")}:</b> ${d[key]}</p>`;
      }
    }

    result.innerHTML = html;
  });
</script>

</body>
</html>
