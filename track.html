<!DOCTYPE html>
<html>
<head>
  <title>Track Shipment – Nexus Viet Air Cargo</title>
  <style>
    #timeline li { color:#aaa }
    #timeline li.active { color:green; font-weight:bold }
  </style>
</head>
<body>

<h1>Shipment Tracking</h1>

<ul id="timeline">
  <li id="received">Received</li>
  <li id="intransit">In Transit</li>
  <li id="arrived">Arrived</li>
  <li id="delivered">Delivered</li>
</ul>

<div id="result">Loading…</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbwoyNzupluztEPyAKdm7jhu8RA-VZkBZ-dBb9Iyu6gDK0oEn_6DMrJgg5SQ6_GA_0wk/exec";
const tracking = new URLSearchParams(location.search).get("tracking");

fetch(API_URL + "?tracking=" + tracking)
  .then(r => r.json())
  .then(d => {
    document.getElementById("result").innerHTML = `
      <p><b>Route:</b> ${d.route}</p>
      <p><b>Receiver:</b> ${d.receiver_name}</p>
      <p><b>Address:</b> ${d.receiver_address}</p>
      <p><b>Items:</b> ${d.item_qty}</p>
      <p><b>Total:</b> ${d.total_mmk} MMK / ${d.total_vnd} VND</p>
    `;

    const map = {
      "Received":"received",
      "In Transit":"intransit",
      "Arrived":"arrived",
      "Delivered":"delivered"
    };
    if (map[d.status]) {
      document.getElementById(map[d.status]).classList.add("active");
    }
  })
  .catch(() => {
    document.getElementById("result").innerText = "Tracking not found";
  });
</script>

</body>
</html>
